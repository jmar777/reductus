!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("redux")):"function"==typeof define&&define.amd?define(["exports","redux"],r):r(e.reductus={},e.redux)}(this,function(e,r){"use strict";function t(e,r){return r={exports:{}},e(r,r.exports),r.exports}function n(){if(!w)throw new Error("You must use the reductus enhancer before calling reductus Service methods")}r=r&&r.hasOwnProperty("default")?r.default:r;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var o=t(function(e,t){!function(e,n){n(t,r)}(0,function(e,r){function t(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o=void 0,u=void 0,i=[],c=void 0,a=null,f={SLICE_ADDED:"@@redux-cake/SLICE_ADDED",SLICE_REMOVED:"@@redux-cake/SLICE_REMOVED"},s=function(e){e||(e={}),e["@@redux-cake"]||(e["@@redux-cake"]=function(e){return null});var t=r.combineReducers(e),o=function(e,r){return r&&"@@redux/INIT"===r.type&&a&&delete(e=n({},e))[a],t(e,r)};return o.originalReducers=e,o},l=function(){c||(c=setTimeout(function(){console.warn("It looks like you forgot to use the reduxCake store enhancer!")},1e3))};e.ActionTypes=f,e.reduxCake=function(e){return function(r,t,n){if(!r.originalReducers)throw new Error("Redux Cake only works if you use our `combineReducers` function!");return o=e(r,t,n),u=r.originalReducers,clearTimeout(c),i.forEach(function(e){return e()}),i.length=0,o}},e.addSlice=function e(r,c){if(!o)return l(),void i.push(function(){return e(r,c)});u[r]?console.warn('There is already a slice with key "'+r+'". This slice was ignored.'):(u=n({},u,t({},r,c)),o.replaceReducer(s(u)),o.dispatch({type:f.SLICE_ADDED,payload:r}))},e.removeSlice=function e(r){if(!o)return l(),void i.push(function(){return e(r)});u[r]&&(delete(u=n({},u))[r],a=r,o.replaceReducer(s(u)),a=null,o.dispatch({type:f.SLICE_REMOVED,payload:r}))},e.combineReducers=s,Object.defineProperty(e,"__esModule",{value:!0})})}),u=o.addSlice,i=o.reduxCake,c=o.combineReducers,a=t(function(e,r){function t(e,r){return e===r}function n(e,r,t){if(null===r||null===t||r.length!==t.length)return!1;for(var n=r.length,o=0;o<n;o++)if(!e(r[o],t[o]))return!1;return!0}function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,o=null,u=null;return function(){return n(r,o,arguments)||(u=e.apply(null,arguments)),o=arguments,u}}function u(e){var r=Array.isArray(e[0])?e[0]:e;if(!r.every(function(e){return"function"==typeof e})){var t=r.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+t+"]")}return r}function i(e){for(var r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var c=0,a=n.pop(),f=u(n),s=e.apply(void 0,[function(){return c++,a.apply(null,arguments)}].concat(t)),l=o(function(){for(var e=[],r=f.length,t=0;t<r;t++)e.push(f[t].apply(null,arguments));return s.apply(null,e)});return l.resultFunc=a,l.recomputations=function(){return c},l.resetRecomputations=function(){return c=0},l}}r.__esModule=!0,r.defaultMemoize=o,r.createSelectorCreator=i,r.createStructuredSelector=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var t=Object.keys(e);return r(t.map(function(r){return e[r]}),function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(e,r,n){return e[t[n]]=r,e},{})})};var c=r.createSelector=i(o)}).createSelector,f=function(e){var r=Object.getOwnPropertyNames(e);return"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e))),r},s=function(e,r,t){var n=t.value,o=!1;return{configurable:!0,get:function(){if(o||this===e.prototype||this.hasOwnProperty(r)||"function"!=typeof n)return n;var t=n.bind(this);return o=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return t},set:function(e){n=e,delete this[r]}}),o=!1,t},set:function(e){n=e}}},l=function(e){if(void 0===e)throw new Error("The getInputSelectors parameter for @selector() is required.");if("function"!=typeof e)throw new Error("Expected the getInputSelectors parameter for @selector() to be a function")},d=function(e,r,t){if(!t||"function"!=typeof t.value||"function"!=typeof e.constructor)throw new Error("@selector() may only be used on class methods.")},p=function(e){if(e&&"string"!=typeof e)throw new Error("Unexpected non-string `type` provided to @reducer().")},y=function(e,r,t){if(!t||"function"!=typeof t.value||"function"!=typeof e.constructor)throw new Error("@reducer() may only be used on class methods.")},v=function(e,r){if("string"!=typeof e)throw new Error("The first parameter (slice) for @service() must be a string.");if(void 0===r)throw new Error("The second second parameter (initialState) for @service() is required.")},h=function(e){if("function"!=typeof e||"function"!=typeof e.prototype.constructor)throw new Error("@service() may only be used on ES6 classes.");["state","slice","dispatch"].forEach(function(r){if(e.prototype[r])throw new Error('"'+r+'" is a reserved method name on Reductus services.')})},w=void 0;e.selector=function(e){return function(r,t,n){l(e),d(r,0,n),n.value._reductusSelector={getInputSelectors:e}}},e.reducer=function(e){return function(r,t,n){p(e),y(r,0,n),n.value._reductusReducer={type:e||t}}},e.service=function(e,r){return function(t){v(e,r),h(t);var o={},i=t.prototype;i.state=function(){return n(),w.getState()[e]},i.slice=function(r){if(n(),!r)throw new Error('Cannot call slice() without providing the "state" parameter');return r[e]},i.dispatch=function(e,r,t){if(n(),"string"!=typeof e)return w.dispatch(e);var o={type:e};return r instanceof Error&&(o.error=!0),void 0!==r&&(o.payload=r),void 0!==t&&(o.meta=t),w.dispatch(o)},f(i).forEach(function(e){if("constructor"!==e){var r=Object.getOwnPropertyDescriptor(i,e);if("function"==typeof r.value){var n=r.value;if(n._reductusSelector){var u=n._reductusSelector.getInputSelectors,c=void 0;r.value=function(){return c?c.apply(void 0,arguments):(c=a(u(this),n.bind(this))).apply(void 0,arguments)},Object.defineProperty(i,e,s(t,e,r))}else n._reductusReducer?(o[n._reductusReducer.type]=n,delete i[e]):Object.defineProperty(i,e,s(t,e,r))}}});var c=void 0;t.get=function(){return c||(c=new t,u(e,function(t,n){return void 0===t?r:(c.onStateAvailable&&"@@redux-cake/SLICE_ADDED"===n.type&&n.payload===e&&c.onStateAvailable(),o[n.type]?o[n.type].call(c,t,n):t)}),c)}}},e.reductusEnhancer=function(e){return i(function(){return w=e.apply(void 0,arguments)})},e.combineReducers=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=reductus.js.map
